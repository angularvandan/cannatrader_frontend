<div class="wish-list-container p-4 flex items-center justify-center">
    <!-- Filters -->
    <div class="flex justify-center items-center mb-6" *ngIf="loadingForProduct">
        <i class="pi pi-spin pi-spinner text-[#3A5C41]" style="font-size: 2rem"></i>
    </div>
    <div class=""*ngIf="!loadingForProduct">

        <div class="bg-gray-100 sm:py-8">
            <nav class="flex sm:mb-8 mb-2" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 ">
                    <li class="inline-flex items-center">
                        <div routerLink="/home"
                            class="cursor-pointer twitter-icon w-10 h-10 bg-nav-bg rounded-full flex justify-center items-center">
                            <i class="pi pi-arrow-left text-primary"></i>
                        </div>
                        <a
                            class=" hidden cursor-pointer text-primary sm:inline-flex text-[22px] font-medium text-gray-800 md:ml-2">
                            <span routerLink="/home">Home</span> / Products Listing
                        </a>
                    </li>
                </ol>
            </nav>
            <div class=" w-full flex-col lg:flex-row flex items-start sm:items-center justify-between mb-4 space-y-2">
                <form [formGroup]="filterform" >
                    <div class="flex flex-wrap justify-center gap-4">
                        <p-dropdown [options]="strainTypes" optionLabel="type"placeholder="Strain Type"formControlName="strain_type"
                             class="custom-dropdown"></p-dropdown>
                        <p-dropdown [options]="categories" optionLabel="name"placeholder="Categories"formControlName="category"
                             class="custom-dropdown"></p-dropdown>
                        <p-dropdown [options]="subCategories" optionLabel="name"placeholder="Sub-Categories"formControlName="sub_category"
                             class="custom-dropdown"></p-dropdown>
                        <p-dropdown [options]="thcRanges"  optionLabel="range"placeholder="THC Range"formControlName="thc_range"
                             class="custom-last-dropdown"></p-dropdown>
                    </div>
                </form>
                <div class="relative flex items-center">
                    <div class="twitter-icon w-10 h-10 bg-nav-bg rounded-full flex justify-center items-center mr-3">
                        <svg width="42" height="42" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="42" height="42" rx="21" fill="#D1DACF" />
                            <path
                                d="M18 24.75C18 24.5511 18.079 24.3603 18.2197 24.2197C18.3603 24.079 18.5511 24 18.75 24H23.25C23.4489 24 23.6397 24.079 23.7803 24.2197C23.921 24.3603 24 24.5511 24 24.75C24 24.9489 23.921 25.1397 23.7803 25.2803C23.6397 25.421 23.4489 25.5 23.25 25.5H18.75C18.5511 25.5 18.3603 25.421 18.2197 25.2803C18.079 25.1397 18 24.9489 18 24.75ZM15 20.25C15 20.0511 15.079 19.8603 15.2197 19.7197C15.3603 19.579 15.5511 19.5 15.75 19.5H26.25C26.4489 19.5 26.6397 19.579 26.7803 19.7197C26.921 19.8603 27 20.0511 27 20.25C27 20.4489 26.921 20.6397 26.7803 20.7803C26.6397 20.921 26.4489 21 26.25 21H15.75C15.5511 21 15.3603 20.921 15.2197 20.7803C15.079 20.6397 15 20.4489 15 20.25ZM12 15.75C12 15.5511 12.079 15.3603 12.2197 15.2197C12.3603 15.079 12.5511 15 12.75 15H29.25C29.4489 15 29.6397 15.079 29.7803 15.2197C29.921 15.3603 30 15.5511 30 15.75C30 15.9489 29.921 16.1397 29.7803 16.2803C29.6397 16.421 29.4489 16.5 29.25 16.5H12.75C12.5511 16.5 12.3603 16.421 12.2197 16.2803C12.079 16.1397 12 15.9489 12 15.75Z"
                                fill="#3A5C41" />
                        </svg>
                    </div>

                    <p-dropdown [options]="sortOrderOpt" [(ngModel)]="sortOrder"(onChange)="sortByAscendingAndDeceding(sortOrder)" optionLabel="name"
                        [style]="{ 'width': 'auto' }" class="custom-new-old-dropdown"></p-dropdown>
                </div>
            </div>
        </div>

        <!-- Product Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" >
            <div *ngFor="let product of products" routerLink="productDetails"
                class="max-w-sm cursor-pointer mx-auto bg-white rounded-lg justify-around overflow-hidden flex">
                <div class="relative">
                    <img [src]="product.images[0]" alt="Canopy Growth"loadig="lazy"style="border-radius:8px;"
                        class=" h-36 md:h-40 lg:h-44 w-28 md:w-32 lg:w-36 object-cover">
                    <div class="absolute top-2 left-2 text-white text-xs px-2 py-1 rounded-lg posted">Posted:
                        {{product.created_at | date: 'dd-MM-yyyy'}}
                    </div>
                </div>
                <div class="py-4 px-5">
                    <div class="flex h-full justify-between items-start">
                        <div class="flex flex-col justify-between h-full">
                            <h2 class="font-bold text-lg text-gray-800">{{product.name}}</h2>
                            <p class="text-sm text-help font-normal">{{product.categories.name}}</p>
                            <p class="text-sm text-[#262626] font-normal">Strain Type: <span
                                    class="text-side">{{product.strain_types.type}}</span>
                            </p>
                            <p class="text-sm text-[#262626] font-normal">THC Range: <span
                                    class="text-side">{{product.thc_ranges.range}}</span>
                            </p>
                            <p class="text-sm text-[#262626] flex items-center">
                                <i class="pi pi-map-marker mr-1 text-side font-bold"></i>
                                Pune
                            </p>
                        </div>
                        <button class="text-gray-500"><i class="pi pi-heart text-side"></i></button>
                    </div>
                </div>
            </div>
        </div>

        <ng-container *ngIf="!loadingForProduct">
            <div *ngIf="!products.length || loadingError " class="flex justify-center items-center text-primary text-base sm:text-lg leading-5 font-semibold py-2 sm:px-4 px-3 ">
                Product Not Found
            </div>
        </ng-container>

        <div class="flex justify-center mt-8" *ngIf="!loadingForProduct && products.length">
            <button (click)="viewMoreProducts()"
                class="bg-[#D1DACF] text-primary text-base sm:text-lg leading-5 font-semibold py-2 sm:px-4 px-3 rounded-xl">View
                More</button>
        </div>
    </div>
    <!-- View More Button -->

</div>